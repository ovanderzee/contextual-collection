{"version":3,"file":"snapCollect.js","sources":["../src/functions.js","../src/index.js","../node_modules/my-lib/module/myLib.js"],"sourcesContent":["/**\n * Convert an array to a pseudo SnapCollect object\n * @private\n * @this {SnapCollect}\n * @param {Object[]} foreignArray - to convert\n * @return {Object} keyed object\n */\nconst arrayToPseudoObject = function (foreignArray) {\n    const pseudoObject = Object.create({ keyIdentifier: this.keyIdentifier })\n    foreignArray.forEach((data) => {\n        pseudoObject[data[this.keyIdentifier].toString()] = data\n    })\n    return pseudoObject\n}\n\n/**\n * Find our type of keys in a pseudoObject\n * @private\n * @this {SnapCollect}\n * @param {Object || Object[]} foreignItem array or (pseudo) SnapCollect - to relate with\n * @return {Object[]}\n */\nconst getForeignKeys = function (foreignItem) {\n    return Object.keys(foreignItem)\n}\n\n// TODO:\n//   also support Set for input\n\nexport { arrayToPseudoObject, getForeignKeys }\n","import { arrayToPseudoObject, getForeignKeys } from './functions'\nimport { arrayIntersection, arrayCombination } from 'my-lib'\n\nconst snapCollect = function (identifier) {\n    const methods = {\n        keyIdentifier: identifier,\n\n        // maintenance functions\n\n        add: function () {\n            const dataList = Array.from(arguments)\n            dataList.forEach((data) => this.set(data[identifier], data))\n        },\n        delete: function (key) {\n            delete this[key.toString()]\n        },\n        get: function (key) {\n            return this[key.toString()]\n        },\n        has: function (key) {\n            return Object.prototype.hasOwnProperty.call(this, key.toString())\n        },\n        get length() {\n            return Object.keys(this).length\n        },\n        set: function (key, data) {\n            this[key.toString()] = data\n        },\n        toggle: function (data) {\n            const key = data[identifier]\n            if (this.has(key)) {\n                this.delete(key)\n            } else {\n                this.set(key, data)\n            }\n        },\n\n        // return arrays\n\n        entries: function () {\n            return Object.entries(this)\n        },\n        keys: function () {\n            return Object.keys(this)\n        },\n        values: function () {\n            return Object.values(this)\n        },\n\n        /**\n         * Find all records from both arrays by identifier,\n         * with deduplication\n         * @param {Object[] || snapCollect} foreignItem\n         * @return {Object[]} common values, deduplicated\n         */\n        combination: function (foreignItem) {\n            if (Array.isArray(foreignItem)) {\n                foreignItem = arrayToPseudoObject.call(this, foreignItem)\n            }\n            const foreignKeys = getForeignKeys.call(this, foreignItem)\n            if (!foreignKeys) return\n            const commonKeys = arrayCombination(this.keys(), foreignKeys)\n            const commons = commonKeys.map((common) => {\n                const fromHere = this.get(common.toString())\n                const fromAbroad = foreignItem[common]\n                return fromHere || fromAbroad\n            })\n            return commons\n        },\n\n        /**\n         * Find records appearing in both own collection and in foreign array\n         * by comparing their identifier,\n         * with deduplication\n         * @param {Object[] || snapCollect} foreignItem\n         * @return {Object[]} mutual values, deduplicated\n         */\n        intersection: function (foreignItem) {\n            if (Array.isArray(foreignItem)) {\n                foreignItem = arrayToPseudoObject.call(this, foreignItem)\n            }\n            const foreignKeys = getForeignKeys.call(this, foreignItem)\n            if (!foreignKeys) return\n            const mutualKeys = arrayIntersection(this.keys(), foreignKeys)\n            const mutuals = mutualKeys.map((mutual) =>\n                this.get(mutual.toString()),\n            )\n            return mutuals\n        },\n\n        // TODO:\n        //   except/excepting\n    }\n\n    return Object.create(methods)\n}\n\nexport default snapCollect\n","const e=function(){let e=Boolean(arguments.length);return Array.from(arguments).forEach(t=>{e=e&&\"number\"==typeof t&&Number.isFinite(t)}),e},t=e=>Boolean(e&&\"string\"==typeof e&&1===e.length),n=e=>t(e)&&Boolean(e.match(/[0-9]/)),o=e=>t(e)&&e.toLowerCase()!==e.toUpperCase(),r=e=>t(e)&&e===e.toLowerCase()&&e!==e.toUpperCase(),f=e=>t(e)&&e===e.toUpperCase()&&e!==e.toLowerCase(),i=e=>e&&e.split&&!e.split(\"\").some(e=>!(o(e)||n(e))),l=(e,t)=>{const n=e.match(t);return n&&n[0]===e},u=function(e,t){return e<\"1e-\"+t&&e>\"-1e-\"+t?0:Number(Math.round(e+\"e\"+t)+\"e-\"+t)},c=function(e,t){const n=function(e,t){if(isNaN(e)||!Number.isInteger(t)||t<1)return\"NaN\";const n=Math.abs(e);if(0===n)return\"0\";if(n===1/0)return String(e);const o=Math.floor(Math.log(n)/Math.log(10)),r=e/Math.pow(10,o);return u(r,t-1)+\"e\"+o}(e,t);return Number(n)},a=e=>\"object\"==typeof e&&(e instanceof String||e instanceof Number||e instanceof BigInt||e instanceof Boolean||e instanceof Symbol),s=function(e){const t=\"string\"==typeof e||\"number\"==typeof e||\"boolean\"==typeof e||\"bigint\"==typeof e||\"symbol\"==typeof e;return a(e)||t},p=function(e){return e&&(e.getRootNode()instanceof Document||e.getRootNode()instanceof ShadowRoot)},g=()=>{console.log(\"Hello World!\")},h=function(e,t){const n=[...e,...t],o=new Set(n);return Array.from(o)},y=function(e,t){let n={};return e.forEach(e=>n[e]=1),t.filter(e=>{if(1===n[e])return delete n[e],e})},m=function(e){let t=[];return t.push.apply(t,document.querySelectorAll(e)),t},b=function(){let e=[...arguments].filter(e=>e>=0),t=[...arguments].filter(e=>e<=0);return e.length===arguments.length||t.length===arguments.length},N=function(e){return e.split(\",\").map(e=>e.trim().replace(/\\s+/g,\" \")).filter(e=>e.length)},w=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d=e=>e.reduce((e,t)=>e+t,0),C=e=>d(e)/e.length||0,M=function(e){let t=\"object\"!=typeof e;return t=t||null===e||a(e),t},S=function(e){let t=e;if(M(e))return e;if(Array.isArray(e)){t=[];for(let n of e)t.push(S(n))}else if(e instanceof Date)t=new Date(e.getTime());else if(e instanceof RegExp)t=new RegExp(e.source,e.flags);else if(\"object\"==typeof e){t={};for(let[n,o]of Object.entries(e))t[n]=S(o)}return t};export{h as arrayCombination,N as arrayFromCommaSeparatedList,m as arrayFromQuery,y as arrayIntersection,S as deepClone,g as greet,w as hasOwnProperty,i as isAlphaNumeric,p as isAttachedToDom,t as isChar,n as isDigit,b as isEqualSigns,l as isExactMatch,M as isFundamental,o as isLetter,r as isLower,s as isPrimitive,f as isUpper,e as isUsableNumber,C as mathAvg,d as mathSum,u as roundAtDecimals,c as roundAtDigits};\n//# sourceMappingURL=myLib.js.map\n"],"names":["arrayToPseudoObject","foreignArray","pseudoObject","Object","create","keyIdentifier","this","forEach","data","toString","getForeignKeys","foreignItem","keys","identifier","methods","add","dataList","Array","from","arguments","set","delete","key","get","has","prototype","hasOwnProperty","call","length","toggle","entries","values","combination","isArray","foreignKeys","e","t","n","o","Set","arrayCombination","map","common","fromHere","fromAbroad","intersection","filter","arrayIntersection","mutual"],"mappings":"AAOA,MAAMA,EAAsB,SAAUC,GAClC,MAAMC,EAAeC,OAAOC,OAAO,CAAEC,cAAeC,KAAKD,gBAIzD,OAHAJ,EAAaM,QAASC,IAClBN,EAAaM,EAAKF,KAAKD,eAAeI,YAAcD,IAEjDN,GAULQ,EAAiB,SAAUC,GAC7B,OAAOR,OAAOS,KAAKD,mBCpBH,SAAUE,GAC1B,MAAMC,EAAU,CACZT,cAAeQ,EAIfE,IAAK,WACD,MAAMC,EAAWC,MAAMC,KAAKC,WAC5BH,EAAST,QAASC,GAASF,KAAKc,IAAIZ,EAAKK,GAAaL,KAE1Da,OAAQ,SAAUC,UACPhB,KAAKgB,EAAIb,aAEpBc,IAAK,SAAUD,GACX,OAAOhB,KAAKgB,EAAIb,aAEpBe,IAAK,SAAUF,GACX,OAAOnB,OAAOsB,UAAUC,eAAeC,KAAKrB,KAAMgB,EAAIb,aAE1DmB,aACI,OAAOzB,OAAOS,KAAKN,MAAMsB,QAE7BR,IAAK,SAAUE,EAAKd,GAChBF,KAAKgB,EAAIb,YAAcD,GAE3BqB,OAAQ,SAAUrB,GACd,MAAMc,EAAMd,EAAKK,GACbP,KAAKkB,IAAIF,GACThB,KAAKe,OAAOC,GAEZhB,KAAKc,IAAIE,EAAKd,IAMtBsB,QAAS,WACL,OAAO3B,OAAO2B,QAAQxB,OAE1BM,KAAM,WACF,OAAOT,OAAOS,KAAKN,OAEvByB,OAAQ,WACJ,OAAO5B,OAAO4B,OAAOzB,OASzB0B,YAAa,SAAUrB,GACfM,MAAMgB,QAAQtB,KACdA,EAAcX,EAAoB2B,KAAKrB,KAAMK,IAEjD,MAAMuB,EAAcxB,EAAeiB,KAAKrB,KAAMK,GAC9C,IAAKuB,EAAa,OAOlB,OCnEwsC,SAASC,EAAEC,GAAG,MAAMC,EAAE,IAAIF,KAAKC,GAAGE,EAAE,IAAIC,IAAIF,GAAG,OAAOpB,MAAMC,KAAKoB,GD6DtvCE,CAAiBlC,KAAKM,OAAQsB,GACtBO,IAAKC,IAC5B,MAAMC,EAAWrC,KAAKiB,IAAImB,EAAOjC,YAC3BmC,EAAajC,EAAY+B,GAC/B,OAAOC,GAAYC,KAY3BC,aAAc,SAAUlC,GAChBM,MAAMgB,QAAQtB,KACdA,EAAcX,EAAoB2B,KAAKrB,KAAMK,IAEjD,MAAMuB,EAAcxB,EAAeiB,KAAKrB,KAAMK,GAC9C,IAAKuB,EAAa,OAKlB,OCvF+wC,SAASC,EAAEC,GAAG,IAAIC,EAAE,GAAG,OAAOF,EAAE5B,QAAQ4B,GAAGE,EAAEF,GAAG,GAAGC,EAAEU,OAAOX,IAAI,GAAG,IAAIE,EAAEF,GAAG,cAAcE,EAAEF,GAAGA,IDmF31CY,CAAkBzC,KAAKM,OAAQsB,GACvBO,IAAKO,GAC5B1C,KAAKiB,IAAIyB,EAAOvC,eAS5B,OAAON,OAAOC,OAAOU"}