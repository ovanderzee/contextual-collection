{"version":3,"file":"snapCollect.js","sources":["../node_modules/my-lib/module/myLib.js","../src/index.js"],"sourcesContent":["const e=function(){let e=Boolean(arguments.length);return Array.from(arguments).forEach(t=>{e=e&&\"number\"==typeof t&&Number.isFinite(t)}),e},t=e=>Boolean(e&&\"string\"==typeof e&&1===e.length),n=e=>t(e)&&Boolean(e.match(/[0-9]/)),o=e=>t(e)&&e.toLowerCase()!==e.toUpperCase(),r=e=>t(e)&&e===e.toLowerCase()&&e!==e.toUpperCase(),f=e=>t(e)&&e===e.toUpperCase()&&e!==e.toLowerCase(),i=e=>e&&e.split&&!e.split(\"\").some(e=>!(o(e)||n(e))),l=(e,t)=>{const n=e.match(t);return n&&n[0]===e},u=function(e,t){return e<\"1e-\"+t&&e>\"-1e-\"+t?0:Number(Math.round(e+\"e\"+t)+\"e-\"+t)},c=function(e,t){const n=function(e,t){if(isNaN(e)||!Number.isInteger(t)||t<1)return\"NaN\";const n=Math.abs(e);if(0===n)return\"0\";if(n===1/0)return String(e);const o=Math.floor(Math.log(n)/Math.log(10)),r=e/Math.pow(10,o);return u(r,t-1)+\"e\"+o}(e,t);return Number(n)},a=e=>\"object\"==typeof e&&(e instanceof String||e instanceof Number||e instanceof BigInt||e instanceof Boolean||e instanceof Symbol),s=function(e){const t=\"string\"==typeof e||\"number\"==typeof e||\"boolean\"==typeof e||\"bigint\"==typeof e||\"symbol\"==typeof e;return a(e)||t},p=function(e){return e&&(e.getRootNode()instanceof Document||e.getRootNode()instanceof ShadowRoot)},g=()=>{console.log(\"Hello World!\")},h=function(e,t){const n=[...e,...t],o=new Set(n);return Array.from(o)},y=function(e,t){let n={};return e.forEach(e=>n[e]=1),t.filter(e=>{if(1===n[e])return delete n[e],e})},m=function(e){let t=[];return t.push.apply(t,document.querySelectorAll(e)),t},b=function(){let e=[...arguments].filter(e=>e>=0),t=[...arguments].filter(e=>e<=0);return e.length===arguments.length||t.length===arguments.length},N=function(e){return e.split(\",\").map(e=>e.trim().replace(/\\s+/g,\" \")).filter(e=>e.length)},w=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},d=e=>e.reduce((e,t)=>e+t,0),C=e=>d(e)/e.length||0,M=function(e){let t=\"object\"!=typeof e;return t=t||null===e||a(e),t},S=function(e){let t=e;if(M(e))return e;if(Array.isArray(e)){t=[];for(let n of e)t.push(S(n))}else if(e instanceof Date)t=new Date(e.getTime());else if(e instanceof RegExp)t=new RegExp(e.source,e.flags);else if(\"object\"==typeof e){t={};for(let[n,o]of Object.entries(e))t[n]=S(o)}return t};export{h as arrayCombination,N as arrayFromCommaSeparatedList,m as arrayFromQuery,y as arrayIntersection,S as deepClone,g as greet,w as hasOwnProperty,i as isAlphaNumeric,p as isAttachedToDom,t as isChar,n as isDigit,b as isEqualSigns,l as isExactMatch,M as isFundamental,o as isLetter,r as isLower,s as isPrimitive,f as isUpper,e as isUsableNumber,C as mathAvg,d as mathSum,u as roundAtDecimals,c as roundAtDigits};\n//# sourceMappingURL=myLib.js.map\n","import { arrayIntersection, arrayCombination } from 'my-lib'\n\n/**\n * Convert an array in object with our type of keys\n * @private\n * @param {Object[]} foreignArray - to convert\n * @return {Object} keyed object\n */\nconst arrayToPseudoObject = function (foreignArray, identifier) {\n    const foreignObject = Object.create({ keyIdentifier: identifier })\n    foreignArray.forEach((data) => {\n        foreignObject[data[identifier].toString()] = data\n    })\n    return foreignObject\n}\n\n/**\n * Find our type of keys in an array or in a snapCollect\n * @private\n * @param {Object} foreignObject of our (pseudo) type - to relate with\n * @return {Object[]}\n */\nconst getForeignKeys = function (foreignItem) {\n    if (foreignItem.keyIdentifier) {\n        return Object.keys(foreignItem)\n    }\n}\n\nconst snapCollect = function (identifier) {\n    const methods = {\n        keyIdentifier: identifier,\n\n        // maintenance functions\n\n        add: function (data) {\n            const key = data[identifier]\n            this.set(key, data)\n        },\n        delete: function (key) {\n            delete this[key.toString()]\n        },\n        get: function (key) {\n            return this[key.toString()]\n        },\n        has: function (key) {\n            return Object.prototype.hasOwnProperty.call(this, key.toString())\n        },\n        get length() {\n            return Object.keys(this).length\n        },\n        set: function (key, data) {\n            this[key.toString()] = data\n        },\n        toggle: function (data) {\n            const key = data[identifier]\n            if (this.has(key)) {\n                this.delete(key)\n            } else {\n                this.set(key, data)\n            }\n        },\n\n        // return arrays\n\n        entries: function () {\n            return Object.entries(this)\n        },\n        keys: function () {\n            return Object.keys(this)\n        },\n        values: function () {\n            return Object.values(this)\n        },\n\n        /**\n         * Find all records from both arrays by identifier,\n         * with deduplication\n         * @param {Object[] || snapCollect} foreignItem\n         * @return {Object[]} common values, deduplicated\n         */\n        combination: function (foreignItem) {\n            if (Array.isArray(foreignItem)) {\n                foreignItem = arrayToPseudoObject(foreignItem, identifier)\n            }\n            const foreignKeys = getForeignKeys(foreignItem)\n            if (!foreignKeys) return\n            const commonKeys = arrayCombination(this.keys(), foreignKeys)\n            const commons = commonKeys.map((common) => {\n                const fromHere = this.get(common.toString())\n                const fromAbroad = foreignItem[common]\n                return fromHere || fromAbroad\n            })\n            return commons\n        },\n\n        /**\n         * Find records appearing in both own collection and in foreign array\n         * by comparing their identifier,\n         * with deduplication\n         * @param {Object[] || snapCollect} foreignItem\n         * @return {Object[]} mutual values, deduplicated\n         */\n        intersection: function (foreignItem) {\n            if (Array.isArray(foreignItem)) {\n                foreignItem = arrayToPseudoObject(foreignItem, identifier)\n            }\n            const foreignKeys = getForeignKeys(foreignItem)\n            if (!foreignKeys) return\n            const mutualKeys = arrayIntersection(this.keys(), foreignKeys)\n            const mutuals = mutualKeys.map((mutual) =>\n                this.get(mutual.toString()),\n            )\n            return mutuals\n        },\n\n        // TODO:\n        //   except/excepting\n    }\n    return Object.create(methods)\n}\n// plain snap subsets  simple-subset\nexport default snapCollect\n"],"names":["arrayToPseudoObject","foreignArray","identifier","foreignObject","Object","create","keyIdentifier","forEach","data","toString","getForeignKeys","foreignItem","keys","methods","add","key","this","set","delete","get","has","prototype","hasOwnProperty","call","length","toggle","entries","values","combination","Array","isArray","foreignKeys","e","t","n","o","Set","from","arrayCombination","map","common","fromHere","fromAbroad","intersection","filter","arrayIntersection","mutual"],"mappings":"AAAK,MCQCA,EAAsB,SAAUC,EAAcC,GAChD,MAAMC,EAAgBC,OAAOC,OAAO,CAAEC,cAAeJ,IAIrD,OAHAD,EAAaM,QAASC,IAClBL,EAAcK,EAAKN,GAAYO,YAAcD,IAE1CL,GASLO,EAAiB,SAAUC,GAC7B,GAAIA,EAAYL,cACZ,OAAOF,OAAOQ,KAAKD,mBAIP,SAAUT,GAC1B,MAAMW,EAAU,CACZP,cAAeJ,EAIfY,IAAK,SAAUN,GACX,MAAMO,EAAMP,EAAKN,GACjBc,KAAKC,IAAIF,EAAKP,IAElBU,OAAQ,SAAUH,UACPC,KAAKD,EAAIN,aAEpBU,IAAK,SAAUJ,GACX,OAAOC,KAAKD,EAAIN,aAEpBW,IAAK,SAAUL,GACX,OAAOX,OAAOiB,UAAUC,eAAeC,KAAKP,KAAMD,EAAIN,aAE1De,aACI,OAAOpB,OAAOQ,KAAKI,MAAMQ,QAE7BP,IAAK,SAAUF,EAAKP,GAChBQ,KAAKD,EAAIN,YAAcD,GAE3BiB,OAAQ,SAAUjB,GACd,MAAMO,EAAMP,EAAKN,GACbc,KAAKI,IAAIL,GACTC,KAAKE,OAAOH,GAEZC,KAAKC,IAAIF,EAAKP,IAMtBkB,QAAS,WACL,OAAOtB,OAAOsB,QAAQV,OAE1BJ,KAAM,WACF,OAAOR,OAAOQ,KAAKI,OAEvBW,OAAQ,WACJ,OAAOvB,OAAOuB,OAAOX,OASzBY,YAAa,SAAUjB,GACfkB,MAAMC,QAAQnB,KACdA,EAAcX,EAAoBW,EAAaT,IAEnD,MAAM6B,EAAcrB,EAAeC,GACnC,IAAKoB,EAAa,OAOlB,OD5FwsC,SAASC,EAAEC,GAAG,MAAMC,EAAE,IAAIF,KAAKC,GAAGE,EAAE,IAAIC,IAAIF,GAAG,OAAOL,MAAMQ,KAAKF,GCsFtvCG,CAAiBtB,KAAKJ,OAAQmB,GACtBQ,IAAKC,IAC5B,MAAMC,EAAWzB,KAAKG,IAAIqB,EAAO/B,YAC3BiC,EAAa/B,EAAY6B,GAC/B,OAAOC,GAAYC,KAY3BC,aAAc,SAAUhC,GAChBkB,MAAMC,QAAQnB,KACdA,EAAcX,EAAoBW,EAAaT,IAEnD,MAAM6B,EAAcrB,EAAeC,GACnC,IAAKoB,EAAa,OAKlB,ODhH+wC,SAASC,EAAEC,GAAG,IAAIC,EAAE,GAAG,OAAOF,EAAEzB,QAAQyB,GAAGE,EAAEF,GAAG,GAAGC,EAAEW,OAAOZ,IAAI,GAAG,IAAIE,EAAEF,GAAG,cAAcE,EAAEF,GAAGA,IC4G31Ca,CAAkB7B,KAAKJ,OAAQmB,GACvBQ,IAAKO,GAC5B9B,KAAKG,IAAI2B,EAAOrC,eAQ5B,OAAOL,OAAOC,OAAOQ"}