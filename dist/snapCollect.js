!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).snapCollect=e()}(this,(function(){"use strict";const t=function(t){return t&&t.toString},e=function(t){return t.toString()},n=function(t,e){Object.defineProperties(t,{identifier:{value:e},name:{value:"SnapCollect"}})},r=function(t){const e=Object.create(Object.getPrototypeOf(this));return n(e,this.identifier),e.add(...t),e},i=function(t,e){const n=Object.entries(t),r=Object.values(this);for(let t of r){let r=!0;n.forEach(e=>{r=r&&JSON.stringify(t[e[0]])===JSON.stringify(e[1])}),r===e&&this.delete(t[this.identifier])}},s={delete:function(n){t(n)&&delete this[e(n)]},get:function(n){if(t(n))return this[e(n)]},has:function(n){if(t(n))return Object.prototype.hasOwnProperty.call(this,e(n))},get length(){return Object.keys(this).length},set:function(n,r){t(n)&&(this[e(n)]=r)}},o={add:function(){const t=Array.from(arguments);return t.forEach(t=>this.set(t[this.identifier],t)),Object.values(this)},clear:function(){const t=Object.keys(this);for(let e of t)this.delete(e)},cross:function(t){Array.isArray(t)&&(t=r.call(this,t));const e=t.keys(),n=Object.keys(this);for(let t of n)e.includes(t)||this.delete(t);return Object.values(this)},drop:function(t){return i.call(this,t,!0),Object.values(this)},hold:function(t){return i.call(this,t,!1),Object.values(this)},toggle:function(t){const e=t[this.identifier];return this.has(e)?this.delete(e):this.set(e,t),Object.values(this)}},c=function(){let t=Boolean(arguments.length);return Array.from(arguments).forEach(e=>{t=t&&"number"==typeof e&&Number.isFinite(e)}),t},u=function(t){try{return JSON.stringify(t)}catch(t){return""}},f=function(t){let e;try{return e=String(t),"[object Object]"===e&&(e=u(t)),e}catch(e){return u(t)}},l={entries:function(){return Object.entries(this)},keys:function(){return Object.keys(this)},values:function(){return Object.values(this)},sort:function(){const t=Object.values(this),e=function(t){try{return!t.toString}catch(t){return!0}};for(let n=arguments.length-1;n>-1;n--){const r=arguments[n];t.sort((function(n,i){if(c(n[r],i[r]))return n[r]-i[r];if(e(n[r])&&e(i[r])){const t=f(n[r]),e=f(n[r]);return t.localeCompare(e)}if(e(n[r]))return t.length;if(e(i[r]))return 0-t.length;const s=n[r].toString(),o=i[r].toString();return s.localeCompare(o)}))}return t},where:function(t){let e=Object.values(this);return Object.keys(t).forEach(n=>{e=e.filter(e=>JSON.stringify(e[n])===JSON.stringify(t[n]))}),e},combination:function(t){Array.isArray(t)&&(t=r.call(this,t));return function(t,e){const n=[...t,...e],r=new Set(n);return Array.from(r)}(this.keys(),t.keys()).map(e=>this.get(e)||t.get(e))},intersection:function(t){Array.isArray(t)&&(t=r.call(this,t));return function(t,e){let n={};return t.forEach(t=>n[t]=1),e.filter(t=>{if(1===n[t])return delete n[t],t})}(this.keys(),t.keys()).map(t=>this.get(t))}};return function(t){const e=function(t){if(!Boolean(t))throw"snapCollect: identifier must evaluate to true";return Object.assign(s,o,l),s}(t),r=Object.create(e);return n(r,t),r}}));
//# sourceMappingURL=snapCollect.js.map
